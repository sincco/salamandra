{% include 'header.html' %}
{% include 'menu.html' %}

<div class="container">
	<div class="row">
		<h1>Clientes</h1>
		<button type="button" class="btn btn-warning"><i class="fa fa-ban " aria-hidden="true" onclick="bloquearAdeudos()"> <span>Bloquear clientes con adeudos</span></i></button>
		<table data-toggle="table" data-search="true" data-show-export="true" data-page-size="20" data-pagination="true" data-show-pagination-switch="true" data-show-columns="true" data-mobile-responsive="true" data-sortable="true">
			<thead>
				<tr>
					<th>Clave</th><th>Nombre</th><th>Estatus</th>
				</tr>
			</thead>
			<tbody>
				{% for cliente in clientes %}
				<tr>
					<td>{{ cliente.CLAVE|e }}</td>
					<td>{{ cliente.NOMBRE|e }}</td>
					<td>{{ cliente.STATUS|e }}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>

<div id="modal" class="modal fade">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
				<h4 id="modal-titulo" class="modal-title">Bloquear</h4>
			</div>
			<div class="modal-body">
				<table id="panel-detalle"></table>
			</div>
		</div>
	</div>
</div>

<script type="text/javascript">
function muestraDetalle() {
	loader.show()
	$( '#panel-detalle' ).bootstrapTable( 'destroy' )
	$( '#modal-titulo' ).html( 'Clientes con 30 d√≠as de adeudo' )
	jQuery.ajax({
		url: '{{constant('BASE_URL')}}dashboard/apidetallepanelcols',
		data: { panel:panel },
		method: 'POST',
		async: false,
		success: function (result) {
			cols = result
		},
		async: false
	})

	$( '#panel-detalle' ).bootstrapTable({
		method: 'get',
		url: '{{constant('BASE_URL')}}dashboard/apidetallepanel/panel/' + panel,
		columns: cols,
		height: 600,
		striped: true,
		pagination: true,
		pageSize: 25,
		pageList: [10, 25, 50, 100, 200],
		search: true,
		showColumns: true,
		showRefresh: true,
		showExport: true,
		mobileResponsive: true,
		minimumCountColumns: 2
	})

	$( '#modal' ).modal('show')

	loader.hide()
}
</script>

{% include 'footer.html' %}