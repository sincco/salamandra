{% include 'header.html' %}
{% include 'menu.html' %}

<div class="container">
	<div class="row">
		<h1>Definici√≥n de Proyecto</h1>
	</div>
	
	<div class="row">
		{% for proyecto in proyectos %}
		<div class="page-header">
			<div class="col-xs-6">
				<h2>{{ proyecto.clave|trim }}<small>{{ proyecto.titulo|trim }}</small></h2>
			</div>
			<div class="col-xs-6">
				<h6>Resumen: {{ proyecto.resumen|trim }}</h6>
			</div>
		</div>
		{% endfor %}
	</div>

	<hr>

	<div class="panel panel-default">
    <div class="panel-heading">COMERCIAL PARTS</div>
    <div class="panel-body">
      <div class="row">
        <div class="col-xs-4"><strong>Total:</strong><span class="comercial_total"></span></div>
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">EXTERNAL SERVICES</div>
    <div class="panel-body">
      <div class="row">
        <div class="col-xs-4"><strong>Total:</strong><span class="external_total"></span></div>
      </div>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">MATERIAL</div>
    <div class="panel-body">
      <div class="row">
        <div class="col-xs-4"><strong>Total:</strong><span class="material_total"></span></div>
      </div>
    </div>
  </div>


  <div class="panel panel-default">
    <form id="laborForm">
    <div class="panel-heading">LABOR</div>
    <div class="panel-body">
      <div class="row">
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Cut&Fit:</strong><span class="labor_cutFit"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="cutFitCosto" class="form-control" data-class="labor_cutFit" data-total="labor_cutFitTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_cutFitTotal"></span>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>NC Mach:</strong><span class="labor_ncMach"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="ncMachCosto" class="form-control" data-class="labor_ncMach" data-total="labor_ncMachTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_ncMachTotal"></span>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Mach:</strong><span class="labor_conventionalMach"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="conventionalMachCosto" class="form-control" data-class="labor_conventionalMach" data-total="labor_conventionalMachTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_conventionalMachTotal"></span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Welding:</strong><span class="labor_welding"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="wendingCosto" class="form-control"  data-class="labor_welding" data-total="labor_weldingTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_weldingTotal"></span>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Finishing:</strong><span class="labor_finishing"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="finishingCosto" class="form-control" data-class="labor_finishing" data-total="labor_finishingTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_finishingTotal"></span>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Assy Packing:</strong><span class="labor_assyPacking"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="assyPackingCosto" class="form-control" data-class="labor_assyPacking" data-total="labor_assyPackingTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_assyPackingTotal"></span>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Laser Service:</strong><span class="labor_laserService"></span>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="laserServiceCosto" class="form-control" data-class="labor_laserService" data-total="labor_laserServiceTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_laserServiceTotal"></span>
            </div>
          </div>
        </div>
        <div class="col-xs-4">
          <div class="row">
            <div class="col-xs-4">
              <strong>Installation:<span class="labor_installation"></span></strong>
            </div>
            <div class="col-xs-4">
              <strong>Costo Hra:</strong><span class="installationCosto" class="form-control"  data-class="labor_installation" data-total="labor_installationTotal"></span>
            </div>
            <div class="col-xs-4">
              <strong>Total:</strong><span class="labor_installationTotal"></span>
            </div>
          </div>
        </div>
      </div>
    </div>
    </form>
  </div>
</div>
	
<script type="text/javascript">
data = {{ productos|raw() }};

actualizarTotales();

function actualizarTotales() {
	var result = [];
	result['COMERCIAL PARTS'] = [];
	result['EXTERNAL SERVICES'] = [];
	result['MATERIAL'] = [];
	result['LABOR'] = [];

	result['COMERCIAL PARTS']['cutFit'] = 0;
	result['COMERCIAL PARTS']['ncMach'] = 0;
	result['COMERCIAL PARTS']['conventionalMach'] = 0;
	result['COMERCIAL PARTS']['welding'] = 0;
	result['COMERCIAL PARTS']['finishing'] = 0;
	result['COMERCIAL PARTS']['assyPacking'] = 0;
	result['COMERCIAL PARTS']['laserService'] = 0;
	result['COMERCIAL PARTS']['installation'] = 0;
	result['COMERCIAL PARTS']['total'] = 0;

	result['EXTERNAL SERVICES']['cutFit'] = 0;
	result['EXTERNAL SERVICES']['ncMach'] = 0;
	result['EXTERNAL SERVICES']['conventionalMach'] = 0;
	result['EXTERNAL SERVICES']['welding'] = 0;
	result['EXTERNAL SERVICES']['finishing'] = 0;
	result['EXTERNAL SERVICES']['assyPacking'] = 0;
	result['EXTERNAL SERVICES']['laserService'] = 0;
	result['EXTERNAL SERVICES']['installation'] = 0;
	result['EXTERNAL SERVICES']['total'] = 0;

	result['MATERIAL']['cutFit'] = 0;
	result['MATERIAL']['ncMach'] = 0;
	result['MATERIAL']['conventionalMach'] = 0;
	result['MATERIAL']['welding'] = 0;
	result['MATERIAL']['finishing'] = 0;
	result['MATERIAL']['assyPacking'] = 0;
	result['MATERIAL']['laserService'] = 0;
	result['MATERIAL']['installation'] = 0;
	result['MATERIAL']['total'] = 0;

	result['LABOR']['cutFit'] = 0;
	result['LABOR']['ncMach'] = 0;
	result['LABOR']['conventionalMach'] = 0;
	result['LABOR']['welding'] = 0;
	result['LABOR']['finishing'] = 0;
	result['LABOR']['assyPacking'] = 0;
	result['LABOR']['laserService'] = 0;
	result['LABOR']['installation'] = 0;
	result['LABOR']['total'] = 0;

	$(data).each(function(){
	if ($.isNumeric(this.cutFit)){ result[this.seccion]['cutFit'] += (this.cutFit * this.cant); }
	if ($.isNumeric(this.ncMach)){ result[this.seccion]['ncMach'] += (this.ncMach * this.cant); }
	if ($.isNumeric(this.conventionalMach)){ result[this.seccion]['conventionalMach'] += (this.conventionalMach * this.cant); }
	if ($.isNumeric(this.welding)){ result[this.seccion]['welding'] += (this.welding * this.cant); }
	if ($.isNumeric(this.finishing)){ result[this.seccion]['finishing'] += (this.finishing * this.cant); }
	if ($.isNumeric(this.assyPacking)){ result[this.seccion]['assyPacking'] += (this.assyPacking * this.cant); }
	if ($.isNumeric(this.laserService)){ result[this.seccion]['laserService'] += (this.laserService * this.cant); }
	if ($.isNumeric(this.installation)){ result[this.seccion]['installation'] += (this.installation * this.cant); }
	if ($.isNumeric(this.subTotal)){ result[this.seccion]['total'] += (this.subTotal); }
	});

	$('.comercial_cutFit').html(result['COMERCIAL PARTS']['cutFit']);
	$('.comercial_ncMach').html(result['COMERCIAL PARTS']['ncMach']);
	$('.comercial_conventionalMach').html(result['COMERCIAL PARTS']['conventionalMach']);
	$('.comercial_welding').html(result['COMERCIAL PARTS']['welding']);
	$('.comercial_finishing').html(result['COMERCIAL PARTS']['finishing']);
	$('.comercial_assyPacking').html(result['COMERCIAL PARTS']['assyPacking']);
	$('.comercial_laserService').html(result['COMERCIAL PARTS']['laserService']);
	$('.comercial_installation').html(result['COMERCIAL PARTS']['installation']);  
	$('.comercial_total').html(result['COMERCIAL PARTS']['total']);  

	$('.external_cutFit').html(result['EXTERNAL SERVICES']['cutFit']);
	$('.external_ncMach').html(result['EXTERNAL SERVICES']['ncMach']);
	$('.external_conventionalMach').html(result['EXTERNAL SERVICES']['conventionalMach']);
	$('.external_welding').html(result['EXTERNAL SERVICES']['welding']);
	$('.external_finishing').html(result['EXTERNAL SERVICES']['finishing']);
	$('.external_assyPacking').html(result['EXTERNAL SERVICES']['assyPacking']);
	$('.external_laserService').html(result['EXTERNAL SERVICES']['laserService']);
	$('.external_installation').html(result['EXTERNAL SERVICES']['installation']); 
	$('.external_total').html(result['EXTERNAL SERVICES']['total']); 

	$('.material_cutFit').html(result['MATERIAL']['cutFit']);
	$('.material_ncMach').html(result['MATERIAL']['ncMach']);
	$('.material_conventionalMach').html(result['MATERIAL']['conventionalMach']);
	$('.material_welding').html(result['MATERIAL']['welding']);
	$('.material_finishing').html(result['MATERIAL']['finishing']);
	$('.material_assyPacking').html(result['MATERIAL']['assyPacking']);
	$('.material_laserService').html(result['MATERIAL']['laserService']);
	$('.material_installation').html(result['MATERIAL']['installation']); 
	$('.material_total').html(result['MATERIAL']['total']); 

	$('.labor_cutFit').html(result['LABOR']['cutFit']);
	$('.labor_ncMach').html(result['LABOR']['ncMach']);
	$('.labor_conventionalMach').html(result['LABOR']['conventionalMach']);
	$('.labor_welding').html(result['LABOR']['welding']);
	$('.labor_finishing').html(result['LABOR']['finishing']);
	$('.labor_assyPacking').html(result['LABOR']['assyPacking']);
	$('.labor_laserService').html(result['LABOR']['laserService']);
	$('.labor_installation').html(result['LABOR']['installation']); 
	$('.labor_total').html(result['LABOR']['total']); 
}

</script>

{% include 'footer.html' %}