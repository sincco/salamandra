var authqrconfig=new function(){this.actualizaCodigo=function(){sincco.consumirAPI("GET",BASE_URL+"authqr/apiObtenerCodigo").done(function(e){$("#codigo").html(e.codigo)}).fail(function(e,o,a){console.log(a),toastr.error("Error al hacer la petición del código.","Intenta de nuevo")})},this.init=function(){setInterval(function(){authqrconfig.actualizaCodigo()},5e3)}},dashboard=new function(){this.filtrar=function(){jQuery.redirect(BASE_URL+"dashboard",{fechaInicio:$("#fechaInicio").val(),fechaFin:$("#fechaFin").val()})},this.muestraDetalle=function(e,o){var a=!1;loader.show(),$("#panel-detalle").bootstrapTable("destroy"),$("#modal-titulo").html("Detalle "+o),jQuery.ajax({url:BASE_URL+"dashboard/apidetallepanelcols",data:{panel:e},method:"POST",async:!1,success:function(e){a=e},async:!1}),$("#panel-detalle").bootstrapTable({method:"get",url:BASE_URL+"dashboard/apidetallepanel/panel/"+e,columns:a,height:600,striped:!0,pagination:!0,pageSize:25,pageList:[10,25,50,100,200],search:!0,showColumns:!0,showRefresh:!0,showExport:!0,mobileResponsive:!0,minimumCountColumns:2}),$("#modal").modal("show"),loader.hide()},this.init=function(){$("#fecha-fin").datetimepicker({format:"DD/MM/YYYY"}),$("#fecha-inicio").datetimepicker({useCurrent:!0,format:"DD/MM/YYYY"}),$("#fecha-inicio").on("dp.change",function(e){$("#fecha-fin").data("DateTimePicker").minDate(e.date),$("#fecha-fin").data("DateTimePicker").date(e.date)}),$("#fecha-fin").on("dp.change",function(e){$("#fecha-inicio").data("DateTimePicker").maxDate(e.date)})}},login=new function(){this.init=function(){$("#password").keypress(function(e){13==e.which&&login.accesar()}),$("#usuario").keypress(function(e){13==e.which&&login.accesar()})},this.accesar=function(){loader.show(),sincco.consumirAPI("POST",BASE_URL+"login/apilogin",{userData:$("#acceso").serializeJSON()}).done(function(e){loader.hide(),e.acceso?window.location=BASE_URL+"dashboard":toastr.warning("Verifica tu usuario y contraseña.","Error de acceso")}).fail(function(e,o,a){console.log(a),toastr.error("Error al hacer la petición de acceso.","Intenta de nuevo"),loader.hide()})}},clientestabla=new function(){this.mostrarAdeudos=function(){$("#modal-bloqueo").modal("show")},this.mostrarActivar=function(){$("#modal-activar").modal("show")},this.bloquearAdeudos=function(){loader.show(),sincco.consumirAPI("POST",BASE_URL+"cxc/adeudos/apibloquear",{auth:$("#2step").val(),clientes:$("#notificaciones").bootstrapTable("getSelections")}).done(function(e){e.status?toastr.success("Se han bloqueado los clientes solicitados","Éxito"):toastr.error(e.error,"Intenta de nuevo"),loader.hide(),$("#modal-bloqueo").modal("hide")}).fail(function(e,o,a){toastr.error("Error al efectuar la operación.","Intenta de nuevo"),loader.hide()})},this.activarClientes=function(){loader.show(),sincco.consumirAPI("POST",BASE_URL+"catalogo/clientes/apistatus",{auth:$("#2step2").val(),clientes:$("#clientes").bootstrapTable("getSelections"),status:"A"}).done(function(e){e.status?toastr.success("Se han activado los clientes solicitados","Éxito"):toastr.error(e.error,"Intenta de nuevo"),loader.hide(),$("#modal-bloqueo").modal("hide")}).fail(function(e,o,a){toastr.error("Error al efectuar la operación.","Intenta de nuevo"),loader.hide()})}};